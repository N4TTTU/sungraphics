---
import Layout from "@/layouts/Layout.astro";
import CtaBar from "@/components/CtaBar.astro";
import { servicios } from "@/assets/data/servicios";

export function getStaticPaths() {
    return servicios.map((s) => ({
        params: { slug: s.slug },
        props: { servicio: s },
    }));
}

const { servicio } = Astro.props;
---

<Layout>
    <section class="bg-white">
        <div class="mx-auto max-w-6xl px-4 py-10">
            <!-- Header (naranja / gris) -->
            <div class="grid overflow-hidden rounded-md md:grid-cols-2">
                <div class="bg-orange-500 px-6 py-8 sm:px-10">
                    <h1
                        class="text-3xl sm:text-4xl font-extrabold leading-tight text-white uppercase"
                        style="white-space: pre-line;"
                    >
                        {servicio.titulo}
                    </h1>
                </div>

                <div class="bg-neutral-600 px-6 py-8 sm:px-10">
                    <p
                        class="text-base sm:text-lg leading-relaxed text-white/90"
                    >
                        {servicio.claim}
                    </p>
                </div>
            </div>

            <!-- Secciones de imÃ¡genes (UNA SOLA VEZ) -->
            {
                servicio.sections?.length ? (
                    <div class="mt-12 space-y-14">
                        {servicio.sections.map((sec) => (
                            <section>
                                <h2 class="text-center text-xl sm:text-2xl font-extrabold text-neutral-700 tracking-wide uppercase">
                                    {sec.title}
                                </h2>

                                <div class="mt-6 grid grid-cols-2 gap-4 sm:grid-cols-3 sm:gap-6">
                                    {sec.images.map((img) => (
                                        <div class="overflow-hidden rounded-md bg-gray-100">
                                            <img
                                                src={img.src}
                                                alt={img.alt ?? sec.title}
                                                loading="lazy"
                                                class="h-40 w-full object-cover transition-transform duration-300 ease-out hover:scale-[1.06]"
                                            />
                                        </div>
                                    ))}
                                </div>
                            </section>
                        ))}
                    </div>
                ) : null
            }
        </div>
    </section>

    <CtaBar />
</Layout>
